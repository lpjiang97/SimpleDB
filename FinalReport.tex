\documentclass[12pt]{myland}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%FILE TITLE%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\begin{center}
	{\Large \myhwname{CSE 444: \texttt{SimpleDB} Final Report}} \\
	\vspace{.05in}
    \myname{Linxing Preston Jiang}\quad\quarter{Winter 2018}\\
	\vspace{.05in}
    \today \\
\end{center}
\vspace{.15in} \hrule \vspace{0.5em}%

\section{Overall System Architecture}
	\label{overview}

	\par In a typical database architecture, there are four main components: Process Manager, Query Executor, Share
Utilities, and Storage Manger (Balazinska, Mass, Lecture 3). For our implementation of \texttt{SimpleDB} in the labs,
we focus on the Storage Manager and Query Executor: adding access methods for data store on disk in lab1, adding both file
mutability (insert/delete tuples to/from file system, eviction from full BufferPool) and query operators (SeqScan, Join,
etc.) \& aggregates (min, max, etc.) in lab2, adding lock manager in lab3, adding log manager in lab4, and finally, adding
parallel data processing in lab6.

    Figure \ref{fig:architecture} shows the parts architecture of \texttt{SimpleDB} which we implemented in the labs.
    \begin{figure}[h]
    \begin{tikzpicture}[
            >=latex,shorten >=2pt,shorten <=2pt,shape aspect=1,
        ]
            \tikzstyle{cyl} = [cylinder, shape border rotate=90, draw, minimum height=1cm, minimum width=5cm]
            \tikzstyle{noo} = [rectangle, draw, minimum height=1cm, minimum width=5cm]
            \tikzstyle{cir} = [ellipse, draw, minimum height=1cm, minimum width=2cm]
            \tikzstyle{poi} = [ellipse, draw, fill]
            \tikzstyle{joining} = []
            \tikzset{>=stealth}
            \tikzstyle{readup} = [red, ->]
            \tikzstyle{comm} = [blue, ->]
        % Disk Interface %
        \node[noo, minimum height = 8cm, minimum width = 6cm, dashed] (diski) at (-10, 2) {};
            \node at ($(diski) + (0, 4)$) {Disk Interface};
        \node[cyl] (disk) at (-10, 0) {Disk};
        \node[noo, minimum height=0.5cm, minimum width=1cm] (diskpage) at (-10, 0.8) {\texttt{File f}};
        \node (diskpage1) at (diskpage.north east) {};
        \node (diskpage2) at (diskpage.north west) {};
        % Heapfile
        \node[noo, minimum height=3cm, minimum width=5cm] (heapfile) at (-10, 3.7) {};
            \node at (heapfile.north) {HeapFile};
        \node (heapfile1) at (heapfile.south east) {};
        \node (heapfile2) at (heapfile.south west) {};
        \path[->] (diskpage1) edge (heapfile1);
        \path[->] (diskpage2) edge (heapfile2);
        % Heappage
        \node[noo, minimum height=1.5cm, minimum width=1cm] (heappage) at (-12, 3.2) {};
        \node[noo, minimum height=1.5cm, minimum width=1cm] (heappage2) at (-11, 3.2) {};
            \node at ($(heappage2.north) + (-0.5, 0)$) {\small{HeapPage}};
            \node at ($(heappage2) + (1, 0)$) {...};
        % Tuple
        \node[noo, minimum height=.1cm, minimum width=.2cm] (tuple1) at (-12.35, 3) {};
        \node[noo, minimum height=.1cm, minimum width=.2cm] (tuple2) at (-12.15, 3) {};
        \node[noo, minimum height=.1cm, minimum width=.2cm] (tuple3) at (-11.95, 3) {};
            \node at (-12.15, 3.5) {\small{Tuple}};
            \node at (-11.75, 3) {...};
        \node (meta) at ($(heapfile)+ (0.5, 0)$) {metadata};

        % Execution Interface
        \node[noo, minimum height=3cm, minimum width=2cm] (buffer) at ($(heapfile) + (6, -3)$) {BufferPool};
        \node[noo, minimum height=1cm, minimum width=2cm] (lock) at ($(buffer)+ (0, 4.5)$) {Lock Manager};
        \node[noo, minimum height=1cm, minimum width=2cm] (log) at ($(lock)+ (0, -1.5)$) {Log Manager};
        \node[noo, minimum height=1.5cm, minimum width=2cm] (catalog) at ($(buffer)+ (0, -3)$) {Catalog};
        \node[noo, minimum height=10cm, minimum width=4cm, dashed] (storage) at ($(buffer)+ (0, 0.5)$) {};
            \node at ($(storage) + (0, 5)$) {Storage Manager};
        % Executor
        \node[noo, minimum height=4.5cm, minimum width=5.5cm, dashed] (exec) at ($(log) + (6, 0.6)$) {};
        \node[noo, minimum height=1cm, minimum width=2cm] (it) at ($(log) + (5, -1)$) {\small{IteratorInterface}};
            \node at ($(it) + (1, -1)$)  {\small{Query Executor}};
        \node (it1) at ($(it) + (3, 1)$) {\tiny{SeqScan}};
        \node (it2) at ($(it1) + (0, 0.5)$) {\tiny{Join}};
        \node (it3) at ($(it2) + (0, 0.5)$) {\tiny{Filter}};
        \node (it4) at ($(it3) + (0, 0.5)$) {\tiny{Aggregates}};
        \node (it5) at ($(it4) + (0, 0.5)$) {\tiny{...}};
        \foreach \x in {1, 2, 3, 4, 5} {
            \path[->] (it) edge [bend left = \x0] (it\x);
        }
    \end{tikzpicture}
    \caption{\texttt{SimpleDB} Architecture}
        \label{fig:architecture}
    \end{figure}

\section{Parallel Data Processing}
	\label{parallel}

\section{Discussion}
	\label{discussion}
\end{document}
